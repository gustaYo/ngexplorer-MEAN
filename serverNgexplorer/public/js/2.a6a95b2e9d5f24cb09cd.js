webpackJsonp([2,3,5,7],{34:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(8),r=o(s),a=i(9),l=o(a);e["default"]={data:function(){return{prov:{name:"",dirscan:"",uri:"",thread:2,type:"ftp",port:21,query:"",queryDate:"",querySize:"",ignore:"",password:"",user:""}}},methods:{saveEdit:function(){l["default"].addFtp(this,this.prov).then(function(t){window.prov=null,this.close()},function(t){console.log("error",t)})}},created:function(){window.prov&&(this.prov=JSON.parse((0,r["default"])(window.prov)))}}},35:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(8),r=o(s),a=i(9),l=o(a);e["default"]={data:function(){return{remoteUri:"http://127.0.0.1:3010",progress:0,paso:1e3,total:0,count:0,remote:{},local:{},state:!1,page:0}},methods:{TestSinronize:function(){var t={action:"found",uri:this.local.uri,dirscan:this.local.dirscan};l["default"].sincronizeServerProve(this,this.remoteUri,t).then(function(t){this.state=!0,this.remote=t.data},function(t){console.log("Host remoto desconocido",t)})},startSincronice:function(){this.sincro()},sincro:function(){var t={action:"getfiles",idprove:this.remote.ftp._id,page:this.page,perPage:15e3};l["default"].sincronizeServerProve(this,this.remoteUri,t).then(function(t){this.count+=t.data.length,l["default"].addFileToServerProve(this,{action:"insert",files:t.data}).then(function(t){this.progress=100*this.count/this.remote.numFiles,this.count<this.remote.numFiles?(this.page+=1,this.sincro()):(console.log("termino la sincronizacion"),l["default"].addFileToServerProve(this,{action:"finish",idOld:this.remote.ftp._id,idNew:this.local._id}).then(function(t){window.alert("terminado")},function(t){console.log("error",t)}))},function(t){console.log("error",t)})},function(t){console.log("Host remoto desconocido",t)})}},created:function(){window.prov&&(this.local=JSON.parse((0,r["default"])(window.prov)))}}},71:function(t,e){t.exports=' <quasar-layout> <div slot=header class=toolbar> <button @click=close()><i>arrow_back</i></button> <div class=toolbar-content> <div class="toolbar-title padding-2"> <div>Proveedor</div> </div> </div> </div> <div class=layout-view> <div class="row gutter sm-column wrap"> <div class=width-4of4> <div class="list inner-delimiter bordered"> <div class="item two-lines"> <i class=item-primary>folder_open</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Nombre:</div> <input class=auto required v-model=prov.name> </div> </div> <div class="item two-lines"> <i class=item-primary>folder_open</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Uri:</div> <input class=auto required v-model=prov.uri> </div> </div> <div class="row group"> <div class="item three-lines"> <i class=item-primary>import_contacts</i> <div class=item-content> <div class=floating-label> <input v-model=prov.dirscan required class=full-width> <label>Directorio Escanner</label> </div> </div> </div> <div class="item two-lines"> <i class=item-primary>folder_shared</i> <div class="item-content row items-center"> <div style="margin-right: 10px">FTP:</div> <quasar-radio :model.sync=prov.type value=ftp></quasar-radio> </div> </div> <div class="item two-lines"> <i class=item-primary>cloud</i> <div class="item-content row items-center"> <div style="margin-right: 10px">HTTP:</div> <quasar-radio :model.sync=prov.type value=http></quasar-radio> </div> </div> </div> <div class="row group" v-if="prov.type === \'ftp\'"> <div class="item three-lines"> <i class=item-primary>face</i> <div class=item-content> <div class=floating-label> <input v-model=prov.user required class=full-width> <label>user</label> </div> </div> </div> <div class="item three-lines"> <i class=item-primary>security</i> <div class=item-content> <div class=floating-label> <input v-model=prov.password required class=full-width type=password> <label>password</label> </div> </div> </div> </div> <div class="row group"> <div class="item three-lines"> <i class=item-primary>low_priority</i> <div class=item-content> <div class=floating-label> <input v-model=prov.query required class=full-width> <label>query Name</label> </div> </div> </div> <div class="item three-lines"> <i class=item-primary>unarchive</i> <div class=item-content> <div class=floating-label> <input v-model=prov.querySize required class=full-width> <label>query Size</label> </div> </div> </div> <div class="item three-lines"> <i class=item-primary>attachment</i> <div class=item-content> <div class=floating-label> <input v-model=prov.queryDate required class=full-width> <label>query Date</label> </div> </div> </div> </div> </div> <div> <div class="row group"> <button class="primary auto" @click=saveEdit()>Guardar</button> <button class="tertiary auto" @click=close()>Cancelar</button> </div> </div> </div> </div> </div> </quasar-layout> '},72:function(t,e){t.exports=' <quasar-layout> <div slot=header class=toolbar> <button @click=close()><i>arrow_back</i></button> <div class=toolbar-content> <div class="toolbar-title padding-2"> <div>Sincronizar proveedor</div> </div> </div> </div> <div class=layout-view> <div class="row gutter sm-column wrap"> <div class=width-4of4> <div class="list inner-delimiter bordered"> <div class="item two-lines"> <i class=item-primary>folder_open</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Remote Uri:</div> <input class=auto required v-model=remoteUri> </div> </div> </div> </div> <div class=width-4of4> <div class="row group"> <button class="primary auto" v-show=!state @click=TestSinronize>Establecer conexión</button> <button class="tertiary auto" v-show=state @click=startSincronice>Sincronizar</button> </div> </div> </div> <quasar-progress :model=progress class="stripe animate"></quasar-progress> <div v-show="count !== 0"> <label>{{ count}}</label>/<b>{{ remote.numFiles}}</b> </div> {{remote|json}} </div>  </quasar-layout> '},73:function(t,e,i){var o,s;o=i(34),s=i(71),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),s&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=s)},74:function(t,e,i){var o,s;o=i(35),s=i(72),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),s&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=s)},91:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(8),r=o(s),a=i(16),l=o(a),n=i(28),d=i(33),c=i(27),v=i(73),u=o(v),p=i(74),m=o(p),f=i(9),h=o(f),g=i(7),y=o(g),w=i(75),b=o(w);e["default"]={route:{canActivate:function(t){return!!l["default"].user_acces("Admin")||t.redirect("/login")}},vuex:{actions:{setFtpsList:n.setFtpsList},getters:{proveedoresList:d.getFtpsList}},data:function(){return{user:l["default"].getUser(),search:"",target1:"#tab-1",target2:"#tab-2",proxy:y["default"].get("proxy",{enable:"noproxy",url:"http://127.0.0.1",port:3128})}},methods:{editUser:function(t){window.user=t,c.Modal.create(b["default"]).css({maxWidth:"60vw",minHeight:"80vh"}).onShow(function(){}).onClose(function(){window.user={}}).show()},saveProxy:function(){y["default"].set("proxy",this.proxy)},userLogout:function(){l["default"].logout()},addEditProv:function(t){var e=this;t?window.prov=t:window.prov=null,c.Modal.create(u["default"]).css({minWidth:"50vw",minHeight:"60vh"}).onShow(function(){}).onClose(function(){e.getFtpProve()}).show()},getFtpProve:function(){h["default"].get(this).then(function(t){this.setFtpsList(t.data)},function(t){console.log("error",t)})},deleteProve:function(t){var e=this;c.Dialog.create({title:"Desea eliminar realmente el proveedor"+t.name,message:"Todos los recursos asociados se perderán",buttons:[{label:"No",handler:function(){console.log("cancelo")}},{label:"Si",handler:function(){e.deleteProveConfirm([t._id])}}]}).show()},closeLoading:function(){setTimeout(c.Loading.hide,600)},deleteProveConfirm:function(t){c.Loading.show(),h["default"].deleteprov(this,(0,r["default"])(t)).then(function(t){this.closeLoading(),this.getFtpProve()},function(t){console.log("error",t)})},escannerProve:function(t){c.Loading.show();var e={_idServer:t._id,proxy:{},complete:"yes"};h["default"].scannerFtp(this,e).then(function(t){this.closeLoading(),c.Dialog.create({title:"Escaneando el ftp",message:"Se esta escaneado, esto puede demorar un poco"}).show()},function(t){this.closeLoading(),console.log("error",t),c.Dialog.create({title:"Error al escanear",message:t.data}).show()})},sincronizeProv:function(t){window.prov=t,c.Modal.create(m["default"]).css({minWidth:"50vw",minHeight:"60vh"}).onShow(function(){}).onClose(function(){}).show()}},created:function(){}}},134:function(t,e){t.exports=' <div class=layout-view> <div style="width: 100%"> <quasar-tabs class=primary slot=navigation> <quasar-tab icon=mail :target=target1 v-link="{path: \'/admin/proveedores\', exact: true}"> Proveedores </quasar-tab> <quasar-tab icon=mail :target=target2 v-link="{path: \'/admin/proxy\', exact: true}"> Configuracion del proxy </quasar-tab> </quasar-tabs> <div id=tab-1 class=tab> <div class="row group"> <quasar-search :model.sync=search class=primary></quasar-search> <button class=primary style=float:right @click=editUser(user)>Usuario</button> <button class=primary style=float:right @click=userLogout()>salir</button> </div> <table style="width: 100%" class="quasar-table highlight bordered compact full-width"> <thead> <tr> <th>Nombre</th> <th>dirscan</th> <th style="width: 5%">Type </th> <th style="width: 10%">Update</th> <th style="width: 10%">Creado</th> <th style="width: 10%">Actions</th> </tr> </thead> <tr v-for="prov in proveedoresList | filterBy search"> <td class=text-left> <label>{{ prov.name }}</label> </td> <td class=text-left> <label>{{ prov.dirscan }}</label> </td> <td> <label>{{ prov.type }}</label> </td> <td class=text-right> {{prov.update}} </td> <td class=text-right> {{prov.create}} </td> <td> <quasar-popover v-ref:pov[$index] position="bottom right"> <button slot=target><i class=on-left>edit</i>Configurar</button> <div class=list> <div class="item item-link"> <div class=item-content @click=addEditProv(prov)>Editar</div> </div> <div class="item item-link"> <div class=item-content @click=deleteProve(prov)>Eliminar</div> </div> <div class="item item-link"> <div class=item-content @click=sincronizeProv(prov)>Sincronizar</div> </div> <div class="item item-link"> <div class=item-content @click=escannerProve(prov)>Scannear</div> </div> </div> </quasar-popover> </td> </tr> </table> <quasar-fab class=absolute-bottom-right type=primary direction=up> <quasar-small-fab label=first class=tertiary @click=addEditProv()>folder_open</quasar-small-fab> </quasar-fab> </div> <div id=tab-2 class=tab> <div class="row gutter sm-column wrap"> <div class=width-4of4> <div class="row group"> <div class="item two-lines"> <i class=item-primary>folder_shared</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Usar proxy:</div> <quasar-radio :model.sync=proxy.enable value=useproxy></quasar-radio> </div> </div> <div class="item two-lines"> <i class=item-primary>cloud</i> <div class="item-content row items-center"> <div style="margin-right: 10px">No usar proxy:</div> <quasar-radio :model.sync=proxy.enable value=noproxy></quasar-radio> </div> </div> </div> </div> <div class=width-2of4 v-if="proxy.enable===\'useproxy\'"> <div class="list inner-delimiter bordered"> <div class="item two-lines"> <i class=item-primary>folder_open</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Url:</div> <input class=auto required v-model=proxy.url> </div> </div> </div> </div> <div class=width-2of4 v-if="proxy.enable===\'useproxy\'"> <div class="list inner-delimiter bordered"> <div class="item two-lines"> <i class=item-primary>folder_open</i> <div class="item-content row items-center"> <div style="margin-right: 10px">Port:</div> <input class=auto required v-model=proxy.port> </div> </div> </div> </div> <button class="primary auto" @click=saveProxy>Guardar</button> </div> </div> </div> </div> '},144:function(t,e,i){var o,s;o=i(91),s=i(134),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),s&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=s)}});