"use strict";function permisosConfig(a,b,c){var d=c.get("ngexplorer_server");if(null===d){var e=window.location.origin;c.add("ngexplorer_server",e)}var f=["anonymous","Admin"];a.defineManyRoles(f,function(a,c){return b.user_permission(c)})}function MainCtrl(a,b,c,d,e,f,g,h,i,j,k){function l(a){"undefined"!=typeof a&&E&&c.moveTo(a)}function m(a){alert("Sorry! You'll need to create a Constituion for "+a+" first!")}function n(a){var b,d=a?c.foundUrlVisited(a,10):c.states;return c.simulateQuery?(b=i.defer(),h(function(){b.resolve(d)},1e3*Math.random(),!1),b.promise):d}function o(a){d.info("Text changed to "+a),E=!0}e.viewFilter=!1,c.files=[],c.tabs=[];var p=null,q=null;c.selected=[],c.settings={printLayout:!0,showRuler:!0,showSpellingSuggestions:!0,presentationMode:"edit"},c.selected=[],c.autoSelect=!1;var p=g.get("selectedDOWNLOAD");null!==p?c.selected=p:g.add("selectedDOWNLOAD",[]),c.deselect=function(a){console.log(a.name,"was deselected")},c.log=function(a){console.log(a.name,"was selected")},c.customFullscreen=b("xs")||b("sm"),c.DescargarFilesSelected=function(d){var e=(b("sm")||b("xs"))&&c.customFullscreen;a.show({controller:"SelecteddownloadCtrl",templateUrl:"views/selecteddownload.html",parent:angular.element(document.body),targetEvent:d,clickOutsideToClose:!0,fullscreen:e,resolve:{selected:function(){return c.selected}}}).then(function(a){},function(){c.status="You cancelled the dialog."}),c.$watch(function(){return b("xs")||b("sm")},function(a){c.customFullscreen=a===!0})},c.decodeURIComponent=function(a){var b=a;try{b=decodeURIComponent(b)}catch(c){}return b},c.onReorder=function(a){console.log("Scope Order: "+c.query.order),console.log("Order: "+a),c.promise=h(function(){},1e3)},c.onPaginate=function(a,b){console.log("Page: "+a+" Limit: "+b),c.promise=h(function(){},700)},c.loadScrollEvent=function(a){a.init?a.init=!1:a.files.length>a.paso&&(a.paso+=20)},c.icons={folder:{active:"folder_open",desactive:"folder"},file:{active:"inbox",desactive:"archive"}},c.topDirections=["left","up"],c.bottomDirections=["down","right"],c.isOpen=!1,c.availableModes=["md-fling","md-scale"],c.selectedMode="md-fling",c.availableDirections=["up","down","left","right"],c.selectedDirection="up",c.breadcrumb=!0,c.breadcrumbList=[],c.modeView=0,c.simulateQuery=!0,c.isDisabled=!1,c.states=[],c.ViewMode=[{title:"viewIcons",urlView:"views/folderview.html",icon:"view_module"},{title:"viewList",urlView:"views/listview.html",icon:"view_list"}],c.settings={};var r=g.get("settings");null!==r?c.settings=r:(c.settings={viewcols:{type:!0,size:!0,time:!0},sizeMode:"MB"},g.add("settings",c.settings)),c.updateConfig=function(){g.add("settings",c.settings)};var s,t=[];c.findFileFolder=function(a){h.cancel(s),s=h(function(){t[c.selectedIndex]||(t[c.selectedIndex]=angular.copy(c.tabs[c.selectedIndex]));var b={type:"file",ftps:[t[c.selectedIndex]._id],name:a};f.getFiles(b,function(a){var b=new Array;for(var d in a){var e={icon:z(a[d]),file:a[d]};e.name=c.decodeURIComponent(a[d].name),e.ico=c.icons[e.icon].desactive,b.push(e)}c.tabs[c.selectedIndex].files=b},function(a){console.log(a)})},500)},c.cancelfindFileFolder=function(){t[c.selectedIndex]&&(c.tabs[c.selectedIndex]=t[c.selectedIndex],c.selectedItem={_id:c.tabs[c.selectedIndex]._id,url:c.tabs[c.selectedIndex].url},c.showBreadcrumb(),delete t[c.selectedIndex])},c.changeViewMode=function(){c.tabs[c.selectedIndex].viewMode=0===c.tabs[c.selectedIndex].viewMode?1:0,c.tabs[c.selectedIndex].paso=40},c.showOnly=function(a){return a.length>12?a.substring(0,12)+"..":a};var u=g.get("ftpsUrlvisited");null!==u?c.states=u:g.add("ftpsUrlvisited",[]),c.showBreadcrumb=function(a){if(a&&(c.breadcrumb=c.breadcrumb?!1:!0),"undefined"!=typeof c.tabs[c.selectedIndex]&&c.breadcrumb){var b=angular.copy(c.tabs[c.selectedIndex].url);b="/"===b?[""]:b.split("/"),c.breadcrumbList=b}},c.activeBreadcrumb=function(a){var b=new Array,d="";if(0===a)d="/";else{for(var e=0;a>=e;e++)b.push(c.breadcrumbList[e]);d=b.join("/")}c.tabs[c.selectedIndex].url=d,c.loadFiles(c.tabs[c.selectedIndex])},c.subMenusCache=[],c.getMenuSubFolder=function(a,b){var d=new Array,e="";if(0===a)e="/";else{for(var g=0;a>=g;g++)d.push(c.breadcrumbList[g]);e=d.join("/")}var h=c.tabs[c.selectedIndex]._id;c.subMenusCache[h]||(c.subMenusCache[h]={}),c.subMenusCache[h][a]={},f.getFiles({directory:e,ftp:h},function(b){var d=new Array;for(var e in b)y(b[e])&&d.push(b[e]);c.subMenusCache[h][a]=d},function(a){console.log(a)})};var v=g.get("ftpsfolders");null!==v?c.tabs=v:g.add("ftpsfolders",[]),j.bindTo(c).add({combo:"up",description:"This one goes to 11",callback:function(){c.IrArriba()}}).add({combo:"left",description:"Tsdfdsfd",callback:function(){c.history(-1)}}).add({combo:"left",description:"Tsdfdsfd",callback:function(){c.history(-1)}}).add({combo:"b",description:"Tsdfdsfd",callback:function(){c.showBreadcrumb(!0)}}),c.addFavorite=function(){var a=angular.copy(c.tabs[c.selectedIndex]),b=a.url.split("/");b=b[b.length-1],""!==b&&(a.title=b),c.favoritos=[];var d=g.get("ftpsFavorites");null!==d?(c.favoritos=d,c.favoritos.push(a),g.add("ftpsFavorites",c.favoritos)):(c.favoritos.push(a),g.add("ftpsFavorites",c.favoritos))},c.selectedIndex=c.tabs.length-1,c.$watch("selectedIndex",function(a,b){q=p,p=c.tabs[a],g.add("ftpsfolders",c.tabs),"undefined"!=typeof p&&(c.selectedItem={_id:p._id,url:p.url},c.showBreadcrumb())});var w=function(a){return{title:a.name,url:a.dirscan,type:a.type,uri:a.uri,disabled:!1,_id:a._id,files:[],viewMode:1,paso:40,init:!0,nave:{current:0,list:[]},query:{order:"name",limit:15,page:1}}};e.$on("openTab",function(a,b){var d=x(b._id);d?c.selectedIndex=d:c.tabs.push(w(b))});var x=function(a){for(var b in c.tabs)if(c.tabs[b]._id===a)return b;return!1};c.decodeName=function(a){return decodeURIComponent(a)},c.addTab=function(a,b){b=b||a+" Content View",c.tabs.push({title:a,content:b,disabled:!1})},c.removeTab=function(a){var b=x(a);c.tabs.splice(b,1),g.add("ftpsfolders",c.tabs)};var y=function(a){return"undefined"==typeof a.extname},z=function(a){var b=y(a)?"folder":"file";return b};c.openInNewTab=function(){var a=angular.copy(c.tabs[c.selectedIndex]);c.tabs.push(a)},c.reloadDirect=function(){c.loadFiles(c.tabs[c.selectedIndex])};var A=function(a){var b=a.nave.list.indexOf(a.url);-1===b&&(a.nave.list.length>10&&a.nave.list.splice(0,1),a.nave.list.push(a.url),a.nave.current=a.nave.list.length-1),c.addUrlVisited(angular.copy(c.selectedItem))};c.loadFiles=function(a,b){var b=b||!1,d=angular.copy(a);c.selectedItem={_id:d._id,url:d.url},c.showBreadcrumb(),b||A(a);var e="ftp"===a.type?"ftp://":"";e+=a.uri,c.promise=h(function(){f.getFiles({directory:a.url,ftp:a._id},function(b){var d=new Array;for(var f in b){var g={icon:z(b[f]),file:b[f]};g.name=c.decodeURIComponent(b[f].name),g.base_url=e+b[f].directory,g.ico=c.icons[g.icon].desactive,d.push(g)}a.files=d,a.query.page=1},function(a){console.log(a)})}),g.add("ftpsfolders",c.tabs)},c.convertFecha=function(a){return new Date(a)},c.findFolder=function(a,b){var d="/";"/"===a.directory[a.directory.length-1]&&(d="");var e=a.directory+d+a.name;if(y(a))b.url=e,c.loadFiles(b),B(b._id,a);else{var f="ftp"===b.type?"ftp://":"";C(f+b.uri+e)}};var B=function(a,b){"undefined"==typeof b.size&&f.getSizeFolder(b,function(a){console.log(a)},function(a){console.log(a)})},C=function(a){var b=window.open(a,"_blank");b.focus()};c.history=function(a){var b=c.tabs[c.selectedIndex].nave.current+a;b>-1&&b<c.tabs[c.selectedIndex].nave.list.length&&(c.tabs[c.selectedIndex].nave.current=b,c.tabs[c.selectedIndex].url=c.tabs[c.selectedIndex].nave.list[b],c.loadFiles(c.tabs[c.selectedIndex],!0))},c.IrArriba=function(){var a=angular.copy(c.tabs[c.selectedIndex].url);if("undefined"!=typeof a.split("/")&&(a=a.split("/"),a.length>=1&&(a.splice(a.length-1,1),a.length>0))){var b="";b=1===a.length&&""===a[0]?"/":a.join("/"),c.tabs[c.selectedIndex].url=b,c.selectedItem={_id:c.tabs[c.selectedIndex]._id,url:c.tabs[c.selectedIndex].url},c.loadFiles(c.tabs[c.selectedIndex],!0)}},c.moveTo=function(a){var b=angular.copy(w(e.ProveedoresList[a._id]));b.url=a.url,E=!1,b.viewMode=c.tabs[c.selectedIndex].viewMode,c.tabs[c.selectedIndex]=angular.copy(b),c.loadFiles(c.tabs[c.selectedIndex],!0)},c.FileSizeConvert=function(a){var b=parseFloat(a/1024/1024).toFixed(2),c=" MB";return b>=1024&&(b=parseFloat(b/1024).toFixed(2),c=" GB"),"NaN"==b?"none":b+c},c.viewModeSee=function(){return"undefined"!=typeof c.tabs[c.selectedIndex]&&"undefined"!=typeof c.tabs[c.selectedIndex].viewMode?1===c.tabs[c.selectedIndex].viewMode?0:1:0};var D=function(a,b){for(var d in c.states)if(c.states[d]._id===a&&c.states[d].url===b)return!0;return!1};c.addUrlVisited=function(a){D(a._id,a.url)||(c.states.push(a),c.states.length>20&&c.states.splice(0,1),g.add("ftpsUrlvisited",c.states))},c.foundUrlVisited=function(a,b){var d=new Array;c.tabs[c.selectedIndex]._id;for(var e in c.states)if("/"!==a&&c.states[e].url.toLowerCase().match(a.toLowerCase())){if(!(d.length<=b))return d;d.push(c.states[e])}return d},c.querySearch=n,c.selectedItemChange=l,c.searchTextChange=o,c.newState=m;var E=!1}function EditUserController(a,b,c){a.user=c.getUser(),a.user.password="",a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.save=function(){c.save(a.user,function(a){b.hide(a)},function(a){alert(a)})}}function DialogController(a,b,c,d){a.prov={},c&&(a.prov=c),a.tiposProveedores=["ftp","http"],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.save=function(c){d.model.post(c).$promise.then(function(a){b.hide(c)},function(b){a.error=b})}}function RemoteSincronizeController(a,b,c,d,e){a.state=!1,a.remote={};var f=0;a.count=0,a.TestSincronize=function(){if(a.mensaje=!1,a.server.url===e.get("ngexplorer_server"))a.mensaje={title:"Jaja",description:"Operacion no permitida"};else{var b={action:"found",uri:d.uri,dirscan:d.dirscan};c.sincroProvServer(a.server.url,b,function(b){a.state=!0,console.log(b),a.remote=b},function(b){console.log(b),a.mensaje={title:"Error",description:"Host remoto desconocido"}})}},a.run=!1,a.RunSincronize=function(){a.run=!0,a.mensaje=!1,g()};var g=function(){var b={action:"getfiles",idprove:a.remote.ftp._id,page:f,perPage:1e3};c.sincroProvServer(a.server.url,b,function(b){a.count+=b.length,c.AddFileToServerProve({action:"insert",files:b},function(b){a.count<a.remote.numFiles?(f+=1,g()):(console.log(a.remote.ftp),c.AddFileToServerProve({action:"finish",idOld:a.remote.ftp._id,idNew:d._id},function(b){console.log("termine"),a.run=!1,a.state=!1,a.remote={},f=0,a.count=0,a.mensaje={title:"Terminado",description:"La sicronizacion fue un exito"}},function(b){a.mensaje={title:"Error",description:"Hubo algun problema"}}))},function(a){console.log(a)})},function(a){console.log(a)})};a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.save=function(a){}}angular.module("ngExplorerApp",["ngAnimate","ngCookies","ngResource","ui.router","ngSanitize","ngMaterial","md.data.table","permission","pascalprecht.translate","LocalStorageModule","ngMdIcons","cfp.hotkeys"]).run(permisosConfig).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("admin",{url:"/admin",data:{permissions:{only:["Admin"],redirectTo:"main"}},templateUrl:"views/admin.html",controller:"AdminCtrl"}).state("home",{url:"/home",templateUrl:"views/home.html",controller:"TablefilterCtrl"}).state("filter",{url:"/filter",templateUrl:"views/tablefilter.html",controller:"TablefilterCtrl"})}]).config(["$mdIconProvider",function(a){a.defaultIconSet("images/icons/sets/core-icons.svg",24)}]).config(["$translateProvider","localStorageServiceProvider","$httpProvider",function(a,b,c){b.setPrefix("explNG"),a.useStaticFilesLoader({prefix:"../translations/trans_",suffix:".json"}),a.useSanitizeValueStrategy("escaped"),a.preferredLanguage("es"),c.interceptors.push(["$q","$location","localStorageService",function(a,b,c){return{request:function(a){return a.headers=a.headers||{},null!=c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(c){return(401===c.status||403===c.status)&&b.path("/loguin"),a.reject(c)}}}])}]).controller("AppCtrl",["$scope","$timeout","$mdSidenav","$log","$location","hotkeys",function(a,b,c,d,e,f){function g(c,d,e){var f;return function(){var e=a,g=Array.prototype.slice.call(arguments);b.cancel(f),f=b(function(){f=void 0,c.apply(e,g)},d||10)}}function h(a){return g(function(){c(a).toggle().then(function(){d.debug("toggle "+a+" is done")})},200)}function i(a){return function(){c(a).toggle().then(function(){d.debug("toggle "+a+" is done")})}}a.status="  ",f.add({combo:"f",description:"Description goes here",callback:function(b,c){a.Ir("filter")}}),f.add({combo:"c",description:"Description goes here",callback:function(b,c){a.Ir("chupaelperro")}}),f.add({combo:"a",description:"Description goes here",callback:function(b,c){a.Ir("admin")}}),a.toggleLeft=h("left"),a.toggleRight=i("right"),a.isOpenRight=function(){return c("right").isOpen()},a.Ir=function(a){e.path("/"+a)}}]).controller("LeftCtrl",["localStorageService","$scope","$timeout","$mdSidenav","$log","Proveedores","$rootScope",function(a,b,c,d,e,f,g){b.ftpsActives=[],c(function(){$(".apprun").fadeIn()},10);var h=function(a){var b=[];for(var c in a)b[a[c]]=!0;return b};b.close=function(){d("left").close().then(function(){e.debug("close LEFT is done")})},g.ProveedoresList=[],b.loadProveedores=function(){f.model.query({entryId:JSON.stringify({type:"ftps"})}).$promise.then(function(c){g.ProveedoresList=[],b.listProveedores=c;var d=[];for(var e in c)void 0!==c[e]._id&&(g.ProveedoresList[c[e]._id]=c[e],d[c[e]._id]=!0);var f=a.get("ftpsActives");null!==f?b.ftpsActives=h(f):(b.ftpsActives=d,a.add("ftpsActives",i(b.ftpsActives)))},function(a){console.log(a)})},b.loadProveedoresFavorites=function(){alert("no implement yet")};b.openFtpTab=function(c){g.viewFilter?(b.ftpsActives[c._id]=b.ftpsActives[c._id]?!1:!0,a.add("ftpsActives",i(b.ftpsActives)),g.$broadcast("ftpfilter",{})):g.$broadcast("openTab",c)},b.ChangeSwitch=function(c){b.ftpsActives[c._id]=b.ftpsActives[c._id]?!0:!1,a.add("ftpsActives",i(b.ftpsActives)),g.$broadcast("ftpfilter",{})},g.viewFilter=!1;var i=function(a){var b=new Array;for(var c in a)a[c]&&b.push(c);return b}}]).controller("RightCtrl",["$location","$scope","$timeout","$mdSidenav","$log","localStorageService","$translate","$mdDialog","$mdMedia","User","$mdBottomSheet",function(a,b,c,d,e,f,g,h,i,j,k){b.showListBottomSheet=function(){b.alert="",k.show({templateUrl:"views/about.html",controller:"AboutCtrl"}).then(function(a){b.alert=a.name+" clicked!"})},b.close=function(){d("right").close().then(function(){e.debug("close RIGHT is done")})},b.server=f.get("ngexplorer_server"),b.SaveUrlServer=function(){f.add("ngexplorer_server",b.server),window.location.reload()};var l=f.get("ngexplorer_idioma");null!==l?(b.idioma=l,g.use(l)):(b.idioma="es",f.add("ngexplorer_idioma","es")),b.changeLanguage=function(a){f.add("ngexplorer_idioma",a),g.use(a)},b.clearAllConfig=function(){f.clearAll(),window.location.reload()},b.customFullscreen=i("xs")||i("sm"),b.user=j.getUser();var m=(i("sm")||i("xs"))&&b.customFullscreen;b.AdminAccess=function(c){"undefined"==typeof b.user.username?(h.show({controller:"LoguinCtrl",templateUrl:"views/loguin.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0,fullscreen:m}).then(function(c){b.user=c,b.close(),a.path("/admin")},function(){b.status="You cancelled the dialog."}),b.$watch(function(){return i("xs")||i("sm")},function(a){b.customFullscreen=a===!0})):(b.close(),a.path("/admin"))},b.alert="",b.showListBottomSheet=function(){b.alert="",k.show({templateUrl:"views/about.html",controller:"AboutCtrl"}).then(function(a){b.alert=a.name+" clicked!"})},b.counter={},b.counterVisit=function(){c(function(){var a=(new UserAgent).parse(navigator.userAgent),c={browser:a.browser,browser_version:a.version,device:"angularApp",os:a.platform,os_version:a.os,type:"v"};j.counterVisit(c,function(a){b.counter=a},function(a){console.log(a)})},1e3)},b.openModalStadis=function(a){h.show({controller:"EstadisticasCtrl",templateUrl:"views/estadisticas.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:m}).then(function(a){},function(){})}}]),permisosConfig.$inject=["Permission","User","localStorageService"],function(a){a.change_loading=function(b){if(a(".overlay_loading").hasClass(b));else{for(var c=1;9>c;c++)a(".overlay_loading").removeClass("load"+c);b>8&&(b="load1")}return b},a.fn.loading=function(b){if(!b)return void a(this).children("div.overlay_loading").fadeOut();var b=b||"load1",c='<div class="overlay_loading load-container '+a.change_loading(b)+' " ><div class="loader" style="top:10%;">Loading...</div></div>';a(this).children("div.overlay_loading").remove(),a(this).prepend(c),a(this).children("div.overlay_loading").css({width:this.outerWidth(),height:this.outerHeight()}),a(this).children("div.overlay_loading").fadeIn()}}(jQuery),angular.module("ngExplorerApp").controller("MainCtrl",MainCtrl).filter("keyboardShortcut",["$window",function(a){return function(b){if(b){var c=b.split("-"),d=/Mac OS X/.test(a.navigator.userAgent),e=!d||c.length>2?"+":"",f={M:d?"⌘":"Ctrl",A:d?"Option":"Alt",S:"Shift"};return c.map(function(a,b){var d=b==c.length-1;return d?a:f[a]}).join(e)}}}]),MainCtrl.$inject=["$mdDialog","$mdMedia","$scope","$log","$rootScope","Proveedores","localStorageService","$timeout","$q","hotkeys","sharedValues"],angular.module("ngExplorerApp").controller("AboutCtrl",["$scope",function(a){a.AcercaDe={users:[{name:"Gustavo Crespo Sánchez",email:"gcrespo@uci.cu",urlImage:"http://directorio.uci.cu/sites/all/modules/custom/directorio_de_personas/display_foto.php?id=E115940",web:""},{name:"Vladimir López Salvador",email:"vlopez@uci.cu",urlImage:"http://directorio.uci.cu/sites/all/modules/custom/directorio_de_personas/display_foto.php?id=E123873"}]}}]),angular.module("ngExplorerApp").controller("DialogController",DialogController).controller("RemoteSincronizeController",RemoteSincronizeController).controller("EditUserController",EditUserController).controller("AdminCtrl",["$http","$mdEditDialog","$q","$timeout","$scope","Proveedores","$mdMedia","$mdDialog","localStorageService","User",function(a,b,c,d,e,f,g,h,i,j){e.selected=[],e.query={order:"name",limit:5,page:1};var k=i.get("ftpsproxy");null!==k?e.proxy=k:(e.proxy={enabled:"none"},i.add("ftpsproxy",e.proxy)),e.ConfigAdminUpdate=function(){i.add("ftpsproxy",e.proxy)},e.loadProveedores=function(){f.model.query({entryId:JSON.stringify({type:"ftps"})}).$promise.then(function(a){e.desserts={count:a.length,data:a}},function(a){console.log(a)})},e.editComment=function(a,c){a.stopPropagation();var d=b.large({modelValue:c.dirscan,placeholder:"/",save:function(a){c.dirscan=a.$modelValue},targetEvent:a,title:"Editar DirScan",validators:{"md-maxlength":30}});d.then(function(a){var b=a.getInput();b.$viewChangeListeners.push(function(){b.$setValidity("test","test"!==b.$modelValue)})})},e.onPaginate=function(a,b){console.log("Scope Page: "+e.query.page+" Scope Limit: "+e.query.limit),console.log("Page: "+a+" Limit: "+b),e.promise=d(function(){},1e3)},e.deselect=function(a){console.log(a.name,"was deselected")},e.log=function(a){console.log(a.name,"was selected")},e.loadStuff=function(){e.promise=d(function(){},1e3)},e.onReorder=function(a){console.log("Scope Order: "+e.query.order),console.log("Order: "+a),e.promise=d(function(){},1e3)},e.SincronizeRemoteServer=function(a,b){var c=(g("sm")||g("xs"))&&e.customFullscreen;h.show({controller:RemoteSincronizeController,templateUrl:"views/sincronize.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:c,resolve:{node:function(){return b||!1}}}).then(function(a){},function(){e.status="You cancelled the dialog."}),e.$watch(function(){return g("xs")||g("sm")},function(a){e.customFullscreen=a===!0})},e.status="  ",e.customFullscreen=g("xs")||g("sm"),e.showAdvanced=function(a,b){var c=(g("sm")||g("xs"))&&e.customFullscreen;h.show({controller:DialogController,templateUrl:"views/addproveedor.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:c,resolve:{node:function(){return b||!1}}}).then(function(a){e.loadProveedores()},function(){e.status="You cancelled the dialog."}),e.$watch(function(){return g("xs")||g("sm")},function(a){e.customFullscreen=a===!0})},e.actionsAdmin=function(a,b,c){switch(b){case"edit":e.showAdvanced(a,c);break;case"del":e.showConfirm(a,c);break;case"sincro":e.SincronizeRemoteServer(a,c);break;case"escan":var d={_idServer:c._id,proxy:e.proxy,complete:"yes"};e.WindowsScanner(a,d);break;case"continueScanner":var d={_idServer:c._id,proxy:e.proxy,complete:"no"};e.WindowsScanner(a,d)}},e.WindowsScanner=function(a,b){f.model.update(b).$promise.then(function(b){var c={title:"Escaneando el ftp",textContent:"Esto puede demorar un poco"};e.showAlert(a,c)},function(b){var c={title:"Error al escanear",textContent:b.data};e.showAlert(a,c)})},e.showAlert=function(a,b){h.show(h.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title(b.title).textContent(b.textContent).ariaLabel("Alert Dialog Demo").ok("Continuar").targetEvent(a))},e.showConfirm=function(a,b){var c=h.confirm().title("Seguro de eliminar "+b.name).textContent("Todos los elementos asociados seran eliminados").ariaLabel("Lucky day").targetEvent(a).ok("Eliminar").cancel("Cancelar");h.show(c).then(function(){l([b._id])},function(){})},e.delMultiple=function(){var a=new Array;for(var b in e.selected)a.push(e.selected[b]._id);l(a)};var l=function(a){f.model.remove({entryId:JSON.stringify(a)}).$promise.then(function(a){e.loadProveedores(),e.selected=[]},function(a){console.log(a)})};e.logout=function(){j.logout(function(){console.log("salir"),window.location.reload()})},e.enableSelection=function(){return e.hideCheckboxes?"enable_selection":"disable_selection"},e.enableHead=function(){return e.hideHead?"show_head":"no_head"},e.UserEdit=function(a){var b=(g("sm")||g("xs"))&&e.customFullscreen;h.show({controller:"EditUserController",templateUrl:"views/edituser.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:b}).then(function(a){e.loadProveedores()},function(){e.status="You cancelled the dialog."}),e.$watch(function(){return g("xs")||g("sm")},function(a){e.customFullscreen=a===!0})}}]),EditUserController.$inject=["$scope","$mdDialog","User"],DialogController.$inject=["$scope","$mdDialog","node","Proveedores"],RemoteSincronizeController.$inject=["$scope","$mdDialog","Proveedores","node","localStorageService"];var APISERVER="";angular.module("ngExplorerApp").service("Proveedores",["$http","$resource","localStorageService",function(a,b,c){var d=c.get("ngexplorer_server"),e=b(d+"/ftp/api/:entryId",{},{query:{method:"GET",params:{entryId:"@entryId"},isArray:!0},post:{method:"POST"},update:{method:"PUT"},remove:{method:"DELETE",params:{entryId:"@entryId"}}});return{getFiles:function(b,c,e){a.post(d+"/ftp/files",b).success(c).error(e)},countFiles:function(b,c,e){a.post(d+"/ftp/filescount",b).success(c).error(e)},sincroProvServer:function(b,c,d,e){a.get(b+"/ftp/files",{params:c}).success(d).error(e)},AddFileToServerProve:function(b,c,e){a.put(d+"/ftp/files",b).success(c).error(e)},getSizeFolder:function(b,c,e){a.get(d+"/ftp/filescount",{params:b}).success(c).error(e)},model:e}}]),angular.module("ngExplorerApp").factory("sharedValues",function(){var a={value:{}};return{getValue:function(b){return"undefined"==typeof a[b]&&(a[b]={}),a[b]},updateValue:function(b,c){return a[b]=c,a[b]}}}),angular.module("ngExplorerApp").controller("TablefilterCtrl",["$scope","Proveedores","sharedValues","$rootScope","localStorageService","$timeout",function(a,b,c,d,e,f){a.hideCheckboxes=!0,a.selected=[],a.query={order:"name",limit:10,page:1},a.baseURl=function(a){return"ftp"===a.type?"ftp://":""},a.decodeURIComponent=function(a){var b=a;try{b=decodeURIComponent(b)}catch(c){}return b},a.onPaginate=function(b,c){console.log("Scope Page: "+a.query.page+" Scope Limit: "+a.query.limit),console.log("Page: "+b+" Limit: "+c),a.promise=f(function(){},502)},a.deselect=function(a){console.log(a.name,"was deselected")},a.log=function(a){console.log(a.name,"was selected")},a.onReorder=function(b){console.log("Scope Order: "+a.query.order),console.log("Order: "+b),a.promise=f(function(){},500)};var g=e.get("filter");null!==g?a.filter=g:(e.add("filter",{}),a.filter={});var h;a.filterEnter=function(){f.cancel(h),h=f(function(){a.filterTable()},500)},a.timeConsult="",a.filterTable=function(){a.filter.type="file",a.filter.ftps=e.get("ftpsActives"),e.add("filter",a.filter);var b=(new Date).getTime();a.promise=f(a.loadFiles(a.filter)),a.promise.then(function(){var c=(new Date).getTime()-b;c/=1e3,a.timeConsult=c,a.query.page=1},function(){console.log("Timer rejected!",Date.now())})},a.focusInput=function(){f(function(){$(".filtroinput input:first").focus()},20)},a.initTable=function(){f(function(){a.getFtpsSystem(function(){a.filterTable()})},10)},a.loadFiles=function(c){b.getFiles(c,function(b){var c=new Array;for(var d in b)if(""!==b[d]){var e="ftp"===a.listProveedores[b[d].ftp].type?"ftp://":"",f=b[d].name;try{f=decodeURIComponent(b[d].name)}catch(g){}if("undefined"!==a.listProveedores[b[d].ftp]){var h={file:b[d],name:f,baseurl:e+a.listProveedores[b[d].ftp].uri+b[d].directory,ftpname:a.listProveedores[b[d].ftp].name};c.push(h)}}a.desserts={count:b.length,data:c}},function(a){console.log(a)})},d.viewFilter=!0,d.$on("ftpfilter",function(b,c){a.filterTable(),a.updateCount(),a.focusInput()}),a.updateCount=function(){b.countFiles(a.filter.ftps,function(b){a.counts=b},function(a){console.log(a)})},a.listProveedores=[],a.getFtpsSystem=function(c){b.model.query({entryId:JSON.stringify({type:"ftps"})}).$promise.then(function(b){for(var d in b)a.listProveedores[b[d]._id]=b[d];c()},function(a){})}}]),angular.module("ngExplorerApp").directive("ngIncludeTemplate",function(){return{templateUrl:function(a,b){return b.ngIncludeTemplate},restrict:"A",scope:{ngIncludeVariables:"&"},link:function(a,b,c){var d=a.ngIncludeVariables();Object.keys(d).forEach(function(b){a[b]=d[b]})}}}),angular.module("ngExplorerApp").controller("LoguinCtrl",["$scope","$mdDialog","User","localStorageService",function(a,b,c,d){a.error="",a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.save=function(a){b.hide(a)},a.loguinUser=function(){c.signin(a.user,function(a){d.add("token",a.token),d.add("user",a.data),b.hide(a.data)},function(b){a.error=b})},a.logout=function(){c.logout(function(){console.log("salir")})}}]),angular.module("ngExplorerApp").factory("User",["localStorageService","$http",function(a,b){function c(){var b=a.get("user"),c={};return null!==b&&(c=b),c}return{save:function(c,d,e){b.post(a.get("ngexplorer_server")+"/user/signin",c).success(d).error(e)},signin:function(c,d,e){b.post(a.get("ngexplorer_server")+"/user/authenticate",c).success(d).error(e)},logout:function(b){a.remove("token"),a.remove("user"),b()},counterVisit:function(c,d,e){b.post(a.get("ngexplorer_server")+"/user/counter",c).success(d).error(e)},getStadist:function(c,d){b.get(a.get("ngexplorer_server")+"/user/counter").success(c).error(d)},user_permission:function(a){var b=c();return b.role===a},getUser:function(){return c()}}}]),angular.module("ngExplorerApp").directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===$(e).val();d.$setValidity("pwmatch",a)})})}}}]),angular.module("ngExplorerApp").controller("EstadisticasCtrl",["$scope","$mdDialog","User",function(a,b,c){a.stadi={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.getsta=function(){c.getStadist(function(b){a.stadi=b},function(a){console.log(a)})}}]),angular.module("ngExplorerApp").directive("whenScrolled",function(){return function(a,b,c){var d=b.parent("div").parent(),e=d[0];d.bind("scroll",function(){e.scrollTop+e.offsetHeight+50>=e.scrollHeight&&a.$apply(c.whenScrolled)})}}),angular.module("ngExplorerApp").controller("SelecteddownloadCtrl",["$scope","selected","$mdDialog",function(a,b,c){console.log(b),a.listadoFilesDownload=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()}}]),angular.module("ngExplorerApp").run(["$templateCache",function(a){a.put("views/about.html",'<md-bottom-sheet class="md-list md-has-header" ng-cloak> <h3>Quienes somos</h3> <div layout="row" layout-xs="column"> <div flex ng-repeat="user in AcercaDe.users"> <md-card layout="row" layout-xs="column"> <md-card-title> <md-card-title-text> <span class="md-headline">{{ user.name}}</span> <span class="md-subhead">{{user.email}}</span> </md-card-title-text> <!--\n                    <md-card-title-media>\n                        <div class="md-media-sm card-media"><img src="{{ user.urlImage }}" alt=""></div>\n                    </md-card-title-media>\n                    --> </md-card-title> </md-card> </div> <div flex> <md-content> <p> Buscar información en los recursos compartidos de la Universidad (nuestros FTPs) nunca ha sido tan fácil, navega por los proveedores registrados y unifica la búsqueda entre ellos. </p> <br> <b></b> <b style="float:right"><a href="https://rice.uci.cu/" target="blank_">Siguenos en RICE</a></b> </md-content> </div> </div>  </md-bottom-sheet>'),a.put("views/addproveedor.html",'<md-dialog aria-label="Mango (Fruit)" ng-cloak> <form name="provForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Nuevo proveedor</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <md-content layout-padding> <div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Nombre</label> <input name="name" ng-model="prov.name" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.name.$error" role="alert" multiple> <div ng-show="provForm.name.$error.required" ng-message="required" class="my-message"> requerido </div> <div ng-show="provForm.name.$error.pattern" ng-message="pattern" class="my-message"> Solo alfanumerios </div> <div ng-show="provForm.name.$error.maxlength" ng-message="md-maxlength" class="my-message"> no mas de 20 </div> <div ng-show="provForm.name.$error.minlength" ng-message="md-maxlength" class="my-message"> mas de 3 </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Direccion</label> <input ng-model="prov.uri"> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Directorio Scanner</label> <input ng-model="prov.dirscan"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Tipo</label> <md-select ng-model="prov.type" ng-init="prov.type = prov.type || \'ftp\'"> <md-option ng-repeat="pro in tiposProveedores" value="{{pro}}"> {{pro}} </md-option> </md-select> </md-input-container> <md-input-container> <label>Numero de hilos concurrentes</label> <input required ng-init="prov.thread = prov.thread || 2" type="number" step="any" name="thread" ng-model="prov.thread" min="2" max="15"> <div ng-messages="rate.thread.$error" role="alert" multiple> <div ng-show="provForm.thread.$error.required" ng-message="required" class="my-message"> requerido </div> <div ng-show="provForm.thread.$error.max" ng-message="max" class="my-message"> no mas de 15 hilos </div> <div ng-show="provForm.thread.$error.min" ng-message="min" class="my-message"> mas de 1 </div> </div> </md-input-container> </div> <div layout-gt-sm="row" ng-if="prov.type !== \'http\'"> <md-input-container class="md-block" flex-gt-sm> <label>User</label> <input ng-model="prov.user"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Password</label> <input type="password" ng-model="prov.password"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Puerto</label> <input name="port" ng-init="prov.port = prov.port || 21" ng-model="prov.port" placeholder="21" required ng-pattern="/^([0-9])*$/" md-maxlength="5"> <div ng-messages="provForm.port.$error" role="alert" multiple> <div ng-show="provForm.port.$error.required" ng-message="required" class="my-message"> requerido </div> <div ng-show="provForm.port.$error.pattern" ng-message="pattern" class="my-message"> Solo numeros </div> <div ng-show="provForm.port.$error.maxlength" ng-message="md-maxlength" class="my-message"> no mas de 5 </div> </div> </md-input-container> </div> <div layout-gt-sm="row" ng-if="prov.type == \'http\'"> <table> <tr> <th> <md-input-container class="md-block"> <label>Query Name</label> <input ng-model="prov.query"> </md-input-container> </th> <th> <md-input-container class="md-block"> <label>Query Date</label> <input ng-init="prov.queryDate=prov.queryDate||\'\'" ng-model="prov.queryDate"> </md-input-container> </th> <th> <md-input-container class="md-block"> <label>Query Size</label> <input ng-model="prov.querySize"> </md-input-container> </th> </tr> </table> </div> <div layout-gt-sm="row" ng-if="prov.type == \'http\'"> <md-input-container class="md-block" flex-gt-sm> <label>Ignore directory</label> <input ng-model="prov.ignore"> </md-input-container> </div> </div> </md-content> <div ng-show="error" ng-click="error = false"> {{ error}} </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <md-button href="https://rice.uci.cu/" target="_blank" md-autofocus> Rice </md-button> <span flex></span> <md-button ng-click="cancel()"> Cancelar </md-button> <md-button ng-disabled="provForm.$invalid" ng-click="save(prov)" style="margin-right:20px"> Aceptar </md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/admin.html",'<md-toolbar class="md-table-toolbar md-default" ng-show="!selected.length"> <div class="md-toolbar-tools"> <span translate="menus.admin.label">Proveedores</span> <div flex></div> <md-icon md-menu-origin md-svg-icon="images/icons/ic_refresh_24px.svg"></md-icon> <form style="" class="ng-valid flex ng-valid-parse ng-dirty" flex=""> <input style="" aria-invalid="false" class="ng-valid ng-touched ng-valid-parse ng-dirty" placeholder="search" type="text" ng-model="filter.search"> </form> <md-button ng-click="logout()"> <span translate="menus.admin.table.close">Cerrar</span> <md-tooltip md-direction="bottom"> <span translate="menus.admin.table.closetooltip">Cerrar</span> </md-tooltip> </md-button> <md-button class="buttonngFinder" ng-click="UserEdit($event)"> <md-icon md-svg-src="images/icons/ic_person_24px.svg"></md-icon> <md-tooltip md-direction="bottom"> <span translate="menus.admin.editUser.tooltip">Editar</span> </md-tooltip> </md-button> <md-button ng-click="hideCheckboxes = !hideCheckboxes" class="buttonngFinder"> <md-icon md-svg-src="images/icons/ic_build_24px.svg"></md-icon> <md-tooltip md-direction="bottom"> <span>{{ \'menus.admin.table.\' + enableSelection() | translate}}</span> </md-tooltip> </md-button> <md-button ng-click="hideHead = !hideHead" class="buttonngFinder"> <md-icon md-svg-src="images/icons/ic_launch_24px.svg"></md-icon> <md-tooltip md-direction="bottom"> <span>{{\'menus.admin.table.\' + enableHead() | translate}}</span> </md-tooltip> </md-button> <md-button ng-click="showAdvanced($event)"> <span translate="menus.admin.table.add">Nuevo</span> <md-tooltip md-direction="bottom"> <span translate="menus.admin.table.addtooltip">Cerrar</span> </md-tooltip> <md-icon md-menu-origin md-svg-icon="images/icons/ic_insert_drive_file_24px.svg"></md-icon> </md-button> </div> </md-toolbar> <md-toolbar class="md-table-toolbar alternate" ng-show="selected.length"> <div class="md-toolbar-tools"> <span>{{selected.length}} {{selected.length > 1 ? \'items\' : \'item\'}} selected</span> <span flex></span> <md-button class="md-fab" aria-label="delete" ng-click="delMultiple()"> <ng-md-icon icon="delete" style="fill:fast_rewind"></ng-md-icon> <md-tooltip> Eliminar seleccionados </md-tooltip> </md-button> <span flex="3"></span> </div> </md-toolbar> <md-table-container ng-init="loadProveedores()"> <table data-md-table data-md-row-select="!hideCheckboxes" data-ng-model="selected" md-progress="promise" class="tableViewList"> <thead ng-if="!hideHead" md-head data-md-order="query.order" md-on-reorder="onReorder"> <tr md-row> <th md-column md:order:by="name"><span translate="menus.admin.table.name">Nombre</span></th> <th md-column md:order:by="type"><span translate="menus.admin.table.type">Type</span></th> <th md-column data-md-numeric data-md-order-by="uri"><span translate="menus.admin.table.dir">Direccion</span></th> <th md-column data-md-numeric data-md-order-by="dirscan"><span translate="menus.admin.table.dirScan">Dir Scan</span></th> <th md-column data-md-numeric data-md-order-by="create" data-hide-sm><span translate="menus.admin.table.date">Creado</span></th> <th md-column data-md-order-by="comment"> <span translate="menus.admin.table.actions.label">Acciones</span> </th> </tr> </thead> <tbody md-body> <tr md-row md:select="dessert" data-md-on-select="log" md-on-deselect="deselect" x-md-auto-select="!blah" data-ng-repeat="dessert in desserts.data| filter: filter.search | orderBy: query.order | limitTo: query.limit : (query.page - 1) * query.limit"> <td md-cell>{{dessert.name}}</td> <td md-cell>{{ dessert.type}}</td> <td md-cell>{{dessert.uri}}</td> <td md-cell ng-click="editComment($event, dessert)" ng-class="{\'md-placeholder\': !dessert.dirscan}"> {{dessert.dirscan|| \'Add a comment\'}} </td> <td md-cell hide-sm>{{dessert.create}}</td> <td md-cell> <md-menu md-position-mode="target-right target"> <md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdOpenMenu($event)"> <md-icon md-menu-origin md-svg-icon="images/icons/ic_build_24px.svg"></md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-repeat="item in [\'del\', \'edit\', \'sincro\']"> <md-button ng-click="actionsAdmin($event, item, dessert)"> <div layout="row"> <p flex>{{ \'menus.admin.table.actions.\' + item | translate }}</p> <md-icon md-menu-align-target md-svg-icon="images/icons/octicon-repo.svg" style="margin: auto 3px auto 0"></md-icon> </div> </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="actionsAdmin($event, \'escan\', dessert)"> <div layout="row"> <p flex>Escanear</p> <md-icon md-menu-align-target md-svg-icon="images/icons/ic_refresh_24px.svg" style="margin: auto 3px auto 0"></md-icon> </div> <md-tooltip> Escanear el proveedor </md-tooltip> </md-button> <md-button ng-if="dessert.type===\'http\'" ng-click="actionsAdmin($event, \'continueScanner\', dessert)"> <div layout="row"> <p flex>Continuar</p> <md-icon md-menu-align-target md-svg-icon="images/icons/ic_refresh_24px.svg" style="margin: auto 3px auto 0"></md-icon> </div> <md-tooltip> Continuar el scaneo </md-tooltip> </md-button> </md-menu-item> </md-menu-content> </md-menu> </td> </tr> </tbody> </table> </md-table-container> <data-md-table-pagination md-limit="query.limit" md-page="query.page" md-total="{{desserts.count}}" md-on-paginate="onPaginate" md-page-select></data-md-table-pagination> <md-content layout-gt-sm="row" layout-padding> <md-radio-group ng-model="proxy.enabled"> <md-radio-button value="active" class="md-primary">Usar Proxy</md-radio-button> <md-radio-button value="none"> No usar Proxy </md-radio-button> </md-radio-group> <div ng-show="proxy.enabled !== \'none\'"> <md-input-container> <label>Url</label> <input ng-model="proxy.url"> </md-input-container> <md-input-container> <label>Puerto</label> <input ng-model="proxy.port"> </md-input-container> </div> <md-button class="add-tab md-primary md-raised" ng-click="ConfigAdminUpdate()">Guardar</md-button> </md-content>'),a.put("views/edituser.html",'<md-dialog ng-cloak> <form name="provForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2 translate="menus.admin.editUser.tooltip">Loguin</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <md-content layout-padding> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label translate="">Usuario</label> <input name="username" ng-model="user.username" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.username.$error" role="alert" multiple> <div ng-show="provForm.username.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.username.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern"> Solo alfanumerios </div> <div ng-show="provForm.username.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength"> no mas de 20 </div> <div ng-show="provForm.username.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label translate="">Nombre</label> <input name="name" ng-model="user.name" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.name.$error" role="alert" multiple> <div ng-show="provForm.name.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.name.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern"> Solo alfanumerios </div> <div ng-show="provForm.name.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength"> no mas de 20 </div> <div ng-show="provForm.name.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label translate="">fistlastname</label> <input name="fistlastname" ng-model="user.fistlastname" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.fistlastname.$error" role="alert" multiple> <div ng-show="provForm.fistlastname.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.fistlastname.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern"> Solo alfanumerios </div> <div ng-show="provForm.fistlastname.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength"> no mas de 20 </div> <div ng-show="provForm.fistlastname.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label translate="">secondlastname</label> <input name="secondlastname" ng-model="user.secondlastname" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.secondlastname.$error" role="alert" multiple> <div ng-show="provForm.secondlastname.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.secondlastname.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern"> Solo alfanumerios </div> <div ng-show="provForm.secondlastname.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength"> no mas de 20 </div> <div ng-show="provForm.secondlastname.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label translate="">Email</label> <input name="email" ng-model="user.email" ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\\.[a-z.]{2,5}$/" ng-minlength="3" required> <div ng-messages="provForm.email.$error" role="alert" multiple> <div ng-show="provForm.email.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.email.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern_email"> Solo alfanumerios </div> <div ng-show="provForm.email.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> </div> <md-list ng-cloak> <md-list-item> <md-icon md-svg-icon="{{setting.icon}}"></md-icon> <p> Cambiar password </p> <md-switch class="md-secondary" ng-model="user.changePassword"></md-switch> </md-list-item> </md-list> <div layout-gt-sm="row" ng-if="user.changePassword"> <md-input-container class="md-block" flex-gt-sm> <label translate="">Password</label> <input type="password" id="password" name="password" ng-model="user.password" ng-minlength="3" required> <div ng-messages="provForm.password.$error" role="alert" multiple> <div ng-show="provForm.password.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.password.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label translate="">Repit Password</label> <input type="password" id="passwordr" name="passwordr" ng-model="user.passwordr" ng-minlength="3" pw-check="password" required> <div ng-messages="provForm.passwordr.$error" role="alert" multiple> <div ng-show="provForm.passwordr.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.passwordr.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> <div ng-show="provForm.passwordr.$error.pwmatch" ng-message="pwmatch" class="my-message" translate="error.pwmatch"> chupa el perro </div> </div> </md-input-container> </div> </md-content> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="cancel()"> <span translate="menus.admin.login.cancel">Cancelar</span> </md-button> <md-button ng-disabled="provForm.$invalid" ng-click="save()" style="margin-right:20px"> <span translate="menus.admin.login.ok">Aceptar</span> </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/estadisticas.html",'<md-dialog aria-label="Mango (Fruit)" ng-cloak> <form name="provForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Estadisticas ngExplorer</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content" ng-init="getsta()"> <md-list ng-cloak> <md-subheader class="md-no-sticky">Visitas Hoy</md-subheader> <md-list-item> <div flex> <span>Unicas:</span>{{ stadi.todayUnique}} </div> <div flex> <span>Totales:</span>{{ stadi.todayTotal}} </div> </md-list-item> <md-divider></md-divider> <md-subheader class="md-no-sticky">Visitas Totales</md-subheader> <md-list-item> <div flex> <span>Unicas:</span>{{ stadi.allUnique}} </div> <div flex> <span>Totales:</span>{{ stadi.allTotal}} </div> </md-list-item> <md-subheader class="md-no-sticky">Top 3 navegador</md-subheader> <md-list-item ng-repeat="nave in stadi.naveTop"> <div flex> <span>{{ nave._id}}</span> </div> <div style="float: right"> <span>{{ nave.cantpost}}</span> </div> </md-list-item> <md-subheader class="md-no-sticky">Top 3 SO</md-subheader> <md-list-item ng-repeat="nave in stadi.osTop"> <div flex> <span>{{ nave._id}}</span> </div> <div style="float: right"> <span>{{ nave.cantpost}}</span> </div> </md-list-item> <md-divider></md-divider> <md-subheader class="md-no-sticky">Top 3 mas buscadas</md-subheader> <md-list-item ng-repeat="nave in stadi.wordSearchTop"> <div flex> <span>{{ nave._id}}</span> </div> <div style="float: right"> <span>{{ nave.cantpost}}</span> </div> </md-list-item> <md-divider></md-divider> <!--\n                    <md-subheader class="md-no-sticky">Top 3 ip acceden</md-subheader>\n                    <md-list-item ng-repeat="nave in stadi.ipTop">\n                        <div flex>\n                            <span>{{ nave._id}}</span>\n                        </div>\n                        <div style="float: right">\n                            <span>{{ nave.cantpost}}</span>\n                        </div>\n                    </md-list-item>\n                    <md-divider></md-divider>\n                    --> <md-subheader class="md-no-sticky">Otros generales</md-subheader> <md-list-item> <div flex> <span>Num Archivos</span> </div> <div style="float: right"> <span>{{ stadi.TotalFiles}}</span> </div> </md-list-item> <md-list-item> <div flex> <span>Num busquedas</span> </div> <div style="float: right"> <span>{{ stadi.TotalFilters}}</span> </div> </md-list-item> </md-list> </div> </md-dialog-content> <md-dialog-actions layout="row"> <md-button href="https://rice.uci.cu/" target="_blank" md-autofocus> Rice </md-button> <span flex></span> <md-button ng-click="cancel()"> Cancelar </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/folderview.html",'<div flex ng-cloak> <section layout="row" layout-sm="column" layout-wrap> <md-button class="md-raised" ng-repeat="tile in tab.files track by $index" ng-if="$index<tab.paso" ng-click="findFolder(tile.file, tab)" ng-cloak ng-mouseover="tile.ico = icons[tile.icon].active;" ng-mouseleave="tile.ico = icons[tile.icon].desactive;" style="width: 120px"> <ng-md-icon options="{&quot;duration&quot;: 375, &quot;rotation&quot;: &quot;none&quot;}" icon="{{tile.ico}}" style="fill:fast_rewind"></ng-md-icon> <md-tooltip md-direction="bottom"> <span>{{tile.name}}</span> </md-tooltip> <br> <span>{{showOnly(tile.name)}}</span> </md-button> </section> <div ng-show="tab.files.length == 0" style="text-align: center"> directorio vacio </div> </div>'),a.put("views/home.html","dfg"),a.put("views/listview.html",'<div> <md-table-container> <table data-md-table md-progress="promise" class="tableViewList" data-md-row-select="settings.viewcols.select" data-ng-model="selected"> <thead md-head data-md-order="tab.query.order" md-on-reorder="onReorder"> <tr md-row> <th md-column md:order:by="file.name"><span translate="menus.listar.name">Nombre</span></th> <th md-column md:order:by="type" ng-show="settings.viewcols.type"><span translate="menus.listar.type">Type</span></th> <th md-column data-md-numeric data-md-order-by="file.size" ng-show="settings.viewcols.size"><span translate="menus.listar.size">Size</span></th> <th md-column data-md-numeric data-md-order-by="file.time" ng-show="settings.viewcols.time"><span translate="menus.listar.time"> Date</span></th> </tr> </thead> <tbody md-body> <tr md-row md:select="tile" data-md-on-select="log" md-on-deselect="deselect" x-md-auto-select="autoSelect" data-ng-repeat="tile in tab.files| filter: tab.filter.search | orderBy: tab.query.order | limitTo: tab.query.limit : (tab.query.page -1) * tab.query.limit" ng-click="findFolder(tile.file, tab)" ng-mouseover="tile.ico = icons[tile.icon].active;" ng-mouseleave="tile.ico = icons[tile.icon].desactive;" ng-if="tab.files.length > 0"> <td md-cell> <ng-md-icon options="{&quot;duration&quot;: 275, &quot;rotation&quot;: &quot;none&quot;}" icon="{{tile.ico}}" style="fill:fast_rewind"></ng-md-icon> {{tile.name}} </td> <td md-cell ng-show="settings.viewcols.type">{{ tile.file.extname}}</td> <td md-cell ng-show="settings.viewcols.size">{{FileSizeConvert(tile.file.size)}}</td> <td md-cell ng-show="settings.viewcols.time">{{tile.file.time| date:\'dd-M-yyyy\'}}</td> </tr> <tr md-row ng-if="tab.files.length === 0"> <td md-cell colspan="5" style="text-align: center">Directorio vacio</td> </tr> </tbody> </table> </md-table-container> <data-md-table-pagination style="background-color: rgb(249, 233, 233)" ng-if="tab.files.length >= tab.query.limit" md-limit="tab.query.limit" md-page="tab.query.page" md-total="{{tab.files.length}}" md-on-paginate="onPaginate" md-page-select></data-md-table-pagination> </div>'),a.put("views/loguin.html",'<md-dialog ng-cloak> <form name="provForm" ng-submit="loguinUser()"> <md-toolbar> <div class="md-toolbar-tools"> <h2 translate="menus.admin.login.title">Loguin</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <md-content layout-padding> <div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label translate="menus.admin.login.user">Usuario</label> <input name="username" ng-model="user.username" md-maxlength="20" ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\\s]+$/" ng-minlength="3" required> <div ng-messages="provForm.username.$error" role="alert" multiple> <div ng-show="provForm.username.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> <div ng-show="provForm.username.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern"> Solo alfanumerios </div> <div ng-show="provForm.username.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength"> no mas de 20 </div> <div ng-show="provForm.username.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength"> mas de 3 </div> </div> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label translate="menus.admin.login.password">Password</label> <input name="password" ng-model="user.password" type="password" required> <div ng-messages="provForm.password.$error" role="alert" multiple> <div ng-show="provForm.password.$error.required" ng-message="required" class="my-message" translate="error.required"> requerido </div> </div> </md-input-container> </div> </div> </md-content> <div class="md-toolbar-tools" ng-show="error != \'\'"> <label> {{ \'error.loguin.\' + error | translate }}</label> <span flex></span> <md-button class="md-icon-button" ng-click="error=\'\'"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="cancel()"> <span translate="menus.admin.login.cancel">Cancelar</span> </md-button> <md-button ng-disabled="provForm.$invalid" type="submit" style="margin-right:20px"> <span translate="menus.admin.login.ok">Aceptar</span> </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/main.html",'<div class="sample" layout="column" ng-cloak> <md-card> <div layout="row" layout-wrap> <md-button class="md-raised buttonngFinder" aria-label="Learn More" ng-click="history( - 1)"> <md-tooltip md-direction="bottom"> <span translate="menus.listar.nave.atras">Atras</span> </md-tooltip> <ng-md-icon icon="arrow_back" style="fill:fast_rewind"></ng-md-icon> </md-button> <md-button class="md-raised buttonngFinder" aria-label="Learn More" ng-click="history(1)"> <md-tooltip md-direction="bottom"> <span translate="menus.listar.nave.adelante">adelante</span> </md-tooltip> <ng-md-icon icon="arrow_forward" style="fill:fast_rewind"></ng-md-icon> </md-button> <md-button class="md-raised buttonngFinder" aria-label="Learn More" ng-click="IrArriba()"> <md-tooltip md-direction="bottom"> <span translate="menus.listar.nave.arriba">arriba</span> </md-tooltip> <ng-md-icon icon="call_merge" style="fill:fast_rewind"></ng-md-icon> </md-button> <div flex style="padding-left: 10px"> <md-autocomplete flex ng-show="!breadcrumb" ng-model="dire" ng-disabled="isDisabled" md-no-cache="noCache" md-selected-item="selectedItem" md-search-text-change="searchTextChange(searchText)" md-search-text="searchText" md-selected-item-change="selectedItemChange(item)" md-items="item in querySearch(searchText)" md-item-text="item.url" md-min-length="0" placeholder="Directorio"> <md-item-template> <div ng-click="moveTo(item)"> <span style="float:right">{{ ProveedoresList[item._id].name}}</span> <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.url}}</span> </div> </md-item-template> <md-not-found> <span translate="menus.listar.nave.noneResult"></span> {{searchText}} </md-not-found> </md-autocomplete> <div flex ng-show="breadcrumb"> <!--\n                    <md-button class="md-raised buttonngFinder" ng-repeat="dir in breadcrumbList track by $index" ng-click="activeBreadcrumb($index)" aria-label="Learn More">\n                        <ng-md-icon icon="folder_shared" style="fill:fast_rewind"></ng-md-icon>\n                        <span>{{ dir}}</span>\n                    </md-button>\n                    --> <div layout="row"> <md-menu-bar> <md-menu ng-repeat="dir in breadcrumbList track by $index"> <div style="width: 100%"> <div style="float: left"> <button ng-click="activeBreadcrumb($index)" style="margin: 0 0px !important;padding:0 1px"> {{ decodeURIComponent(dir)}}/ </button> </div> <div ng-if="$index < breadcrumbList.length - 1" style="float: left"> <md-button class="md-icon-button md-primary" aria-label="Settings" ng-click="getMenuSubFolder($index); $mdOpenMenu()" style="margin: 0 0px !important"> <ng-md-icon icon="folder_shared" style="fill:fast_rewind"></ng-md-icon> <md-tooltip md-direction="bottom"> <span>Directorios contenidos en {{dir}} /</span> </md-tooltip> </md-button> </div> </div> <md-menu-content> <md-menu-item class="md-indent" ng-repeat="folder in subMenusCache[tabs[selectedIndex]._id][$index]"> <md-icon md-svg-icon="undo"></md-icon> <md-button ng-click="findFolder(folder, tabs[selectedIndex])" aria-label="Settings"> {{ decodeURIComponent(folder.name)}} </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-menu-bar> </div> </div> </div> <div flex="2"> <md-menu-bar> <md-menu> <button ng-click="$mdOpenMenu()" style="background-color: gainsboro"> Menu </button> <md-menu-content style="background-color:rgb(233, 233, 233)"> <md-menu-item class="alt-textaling"> <md-input-container> <label for="testInput">Buscar</label> <input type="text" id="server" ng-model="filterFolderFile" md-autofocus ng-change="findFileFolder(filterFolderFile)"> </md-input-container> <md-button class="md-raised" aria-label="Learn More" style="width: 10px!important" ng-click="cancelfindFileFolder(); filterFolderFile = \'\'" md-prevent-menu-close="md-prevent-menu-close"> <md-tooltip md-direction="bottom"> <span>Cancelar busqueda / Limpiar</span> </md-tooltip> <ng-md-icon icon="find_in_page" style="fill:fast_rewind"></ng-md-icon> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item class="alt-textaling"> <md-button ng-click="showBreadcrumb(true);" aria-label="Learn More" md-prevent-menu-close="md-prevent-menu-close"> Breadcrumb <span class="md-alt-text"> b</span> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item> <md-menu> <md-button ng-click="$mdOpenMenu()">Mostar</md-button> <md-menu-content style="background-color: rgb(233, 233, 233)"> <md-menu-item type="checkbox" ng-model="settings.viewcols.type" ng-change="updateConfig()"> Tipo </md-menu-item> <md-menu-item type="checkbox" ng-model="settings.viewcols.size" ng-change="updateConfig()"> Tamano </md-menu-item> <md-menu-item type="checkbox" ng-model="settings.viewcols.time" ng-change="updateConfig()"> Fecha </md-menu-item> <md-menu-item type="checkbox" ng-model="settings.viewcols.select" ng-change="updateConfig()"> Seleccionar para descargar </md-menu-item> </md-menu-content> </md-menu> </md-menu-item> <!--\n                            <md-menu-item>\n                                <md-menu>\n                                    <md-button ng-click="$mdOpenMenu()">Mode</md-button>\n                                    <md-menu-content width="3">\n                                        <md-menu-item type="radio" ng-model="settings.sizeMode" value="\'KB\'">KB</md-menu-item>\n                                        <md-menu-item type="radio" ng-model="settings.sizeMode" value="\'MB\'">MB</md-menu-item>\n                                        <md-menu-item type="radio" ng-model="settings.sizeMode" value="\'GB\'">GB</md-menu-item>\n                                    </md-menu-content>\n                                </md-menu>\n                            </md-menu-item>\n                            --> <md-menu-item class="md-indent"> <md-icon md-svg-icon="undo"></md-icon> <md-button ng-click="history( - 1)"> Undo <span class="md-alt-text"></span> </md-button> </md-menu-item> <md-menu-item class="md-indent"> <md-icon md-svg-icon="redo"></md-icon> <md-button ng-click="history(1)"> Redo <span class="md-alt-text"></span> </md-button> </md-menu-item> <md-menu-divider></md-menu-divider> <md-menu-item class="md-indent"> <md-icon md-svg-icon="content-cut"></md-icon> <md-button ng-click="ctrl.sampleAction(\'cut\', $event)"> Cut <span class="md-alt-text">{{ \'M-X\' | keyboardShortcut }}</span> </md-button> </md-menu-item> <md-menu-item class="md-indent"> <md-icon md-svg-icon="content-copy"></md-icon> <md-button ng-click="ctrl.sampleAction(\'copy\', $event)"> Copy <span class="md-alt-text">{{ \'M-C\' | keyboardShortcut }}</span> </md-button> </md-menu-item> <md-menu-item class="md-indent"> <md-icon md-svg-icon="content-paste"></md-icon> <md-button ng-click="ctrl.sampleAction(\'paste\', $event)"> Paste <span class="md-alt-text">{{ \'M-P\' | keyboardShortcut }}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-menu-bar> </div> </div> </md-card> <md-whiteframe style="background-color: #fcddde" ng-if="tabs.length == 0" class="md-whiteframe-1dp" flex-sm="45" flex-gt-sm="35" flex-gt-md="25" layout layout-align="center center"> <h1>Selecciona un proveedor para comenzar</h1> </md-whiteframe> <md-content> <md-tabs md-selected="selectedIndex" md-border-bottom md-autoselect style="min-height: 80vh;overflow: hidden !important"> <md-tab ng-repeat="tab in tabs track by $index" ng-disabled="tab.disabled"> <md-tab-label> <label>{{tab.title}}</label> <md-tooltip md-direction="bottom"> <span>{{ tab.uri}}</span> </md-tooltip> <ng-md-icon icon="close" ng-click="removeTab(tab._id)" ng-show="tabs.length > 1"></ng-md-icon> </md-tab-label> <md-tab-body> <div when-scrolled="loadScrollEvent(tab)" class="demo-tab tab{{$index % 4}}" style="padding: 25px" ng-init="loadFiles(tab);" ng-include="ViewMode[tab.viewMode].urlView"></div> </md-tab-body> </md-tab> </md-tabs> </md-content> <div style="position: fixed;bottom: 80px;right: 10px"> <md-fab-speed-dial md-open="isOpen" md-direction="{{selectedDirection}}" ng-class="selectedMode" ng-mouseenter="isOpen = true" ng-mouseleave="isOpen = false"> <md-fab-trigger> <md-button aria-label="menu" class="md-fab md-warn"> <md-icon md-svg-src="images/icons/menu.svg"></md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-click="DescargarFilesSelected($event)"> <md-tooltip md-direction="left"> <span>Descargar archivos seleccionados</span> </md-tooltip> <md-icon md-svg-src="images/icons/octicon-repo.svg" aria-label="Nuevo tab"></md-icon> </md-button> <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-click="openInNewTab()"> <md-tooltip md-direction="left"> <span translate="menus.listar.fab-speed.newTab">Abrir en nuevo tab</span> </md-tooltip> <md-icon md-svg-src="images/icons/copy2.svg" aria-label="Nuevo tab"></md-icon> </md-button> <!--\n                <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-click="addFavorite()">\n                    <md-tooltip md-direction="left">\n                       <span translate="menus.listar.fab-speed.addFav">Abrir en nuevo tab</span>\n                    </md-tooltip>\n                    <md-icon md-svg-src="images/icons/favorite.svg" aria-label="Adicionar favoritos"></md-icon>\n                </md-button>\n                --> <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-click="reloadDirect()"> <md-tooltip md-direction="left"> <span translate="menus.listar.fab-speed.reloadDir">Abrir en nuevo tab</span> </md-tooltip> <md-icon md-svg-src="images/icons/ic_refresh_24px.svg" aria-label="Abrir en nuevo tab"></md-icon> </md-button> <md-button aria-label="Twitter" class="md-fab md-raised md-mini" ng-click="changeViewMode()"> <md-tooltip md-direction="left"> <span>{{\'menus.listar.fab-speed.\' + ViewMode[viewModeSee()].title | translate}}</span> </md-tooltip> <ng-md-icon icon="{{ViewMode[viewModeSee()].icon}}" style="fill:fast_rewind"></ng-md-icon> </md-button> </md-fab-actions> </md-fab-speed-dial> </div> </div>'),a.put("views/selecteddownload.html",'<md-dialog aria-label="Mango (Fruit)" ng-cloak> <md-toolbar> <div class="md-toolbar-tools"> <h2>Listado de archivos a descargar</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <ol style="padding-left: 40px"> <li class="md-3-line" style="min-height: 8px" ng-repeat="item in listadoFilesDownload track by $index"> <h5><a href="{{ item.base_url + \'/\' + item.file.name}}">{{ item.name}}</a></h5> </li> </ol> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="cancel()"> Cancelar </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/sincronize.html",'<md-dialog aria-label="Mango (Fruit)" ng-cloak> <form name="provForm"> <md-toolbar> <div class="md-toolbar-tools"> <h2>Sincronizar proveedor</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <md-content layout-padding> <div> <div layout-gt-sm="row"> <div layout="row" layout-sm="column"> <md-input-container> <label for="testInput">Url servidor remoto</label> <input type="text" id="server" ng-model="server.url" md-autofocus> </md-input-container> <md-button ng-show="!state" md-no-ink class="md-primary" ng-click="TestSincronize()">Test</md-button> <md-button ng-show="state" md-no-ink class="md-primary" ng-click="RunSincronize()">Sincronizar</md-button> </div> </div> <md-progress-linear ng-show="run" md-mode="indeterminate"></md-progress-linear> <div ng-show="count !== 0"> <label>{{ count}}</label>/<b>{{ remote.numFiles}}</b> </div> <div ng-show="mensaje" class="alert alert-success" role="alert"> <strong>{{mensaje.title}}</strong> {{ mensaje.description }} </div> </div> </md-content> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="cancel()"> Cancelar </md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/tablefilter.html",'<md-table-container ng-init="initTable();\n        focusInput();\n        updateCount();"> <table data-md-table data-md-row-select="!hideCheckboxes" data-ng-model="selected" md-progress="promise"> <thead ng-if="!hideHead" md-head data-md-order="query.order" md-on-reorder="onReorder"> <tr md-row> <th md-column md:order:by="name"><span><label style="float: right">Consultado en {{timeConsult}} s</label><span translate="menus.listar.name">Nombre</span></span></th> <th md-column md:order:by="extname"><span translate="menus.listar.extname">extname</span></th> <th md-column data-md-numeric data-md-order-by="ftp"><span>Ftp</span></th> </tr> </thead> <tbody md-body> <tr md-row> <td md-cell> <md-input-container class="md-block filtroinput" flex-gt-sm> <label translate="menus.filter.filter-name">Filtro nombre </label> <input ng-model="filter.name" ng-keyup="filterEnter()"> </md-input-container> </td> <td md-cell> <md-input-container class="md-block filtroinput" flex-gt-sm> <label translate="menus.filter.filter-extname">Filtro extencion</label> <input ng-model="filter.extname" ng-keyup="filterEnter()"> </md-input-container> </td> <td md-cell hide-sm>{{counts.ftpsFilesSelect}}/{{ counts.countAll}}</td> </tr> <tr flex-gt-sm md-row md:select="dessert" data-md-on-select="log" md-on-deselect="deselect" x-md-auto-select="!blah" data-ng-repeat="dessert in desserts.data| orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell><a ng-href="{{ dessert.baseurl + \'/\' + dessert.file.name}}" target="_blanck">{{ dessert.name}}</a></td> <td md-cell>{{dessert.file.extname}}</td> <td md-cell hide-sm><a ng-href="{{ dessert.baseurl}}" target="_blanck">{{ dessert.ftpname }}</a></td> </tr> <tr flex-gt-sm md-row data-md-on-select="log" ng-if="desserts.data.length == 0"> <td md-cell colspan="3" style="text-align: center">No se encontraron resultados</td> </tr> </tbody> </table> </md-table-container> <data-md-table-pagination md-limit="query.limit" md-page="query.page" md-total="{{desserts.count}}" md-on-paginate="onPaginate" md-page-select></data-md-table-pagination>')}]);