<md-dialog ng-cloak>
    <form name="provForm">
        <md-toolbar>
            <div class="md-toolbar-tools">
                <h2 translate="menus.admin.editUser.tooltip">Loguin</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="cancel()">
                    <md-icon md-svg-src="images/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon>
                </md-button>
            </div>
        </md-toolbar>
        <md-dialog-content>
            <div class="md-dialog-content">
                <md-content layout-padding>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">Usuario</label>
                            <input
                                name="username"
                                ng-model="user.username"
                                md-maxlength="20"
                                ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\s]+$/"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.username.$error" role="alert" multiple>
                                <div ng-show="provForm.username.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.username.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern">
                                    Solo alfanumerios 
                                </div>
                                <div ng-show="provForm.username.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength">
                                    no mas de 20
                                </div>
                                <div ng-show="provForm.username.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">Nombre</label>
                            <input
                                name="name"
                                ng-model="user.name"
                                md-maxlength="20"
                                ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\s]+$/"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.name.$error" role="alert" multiple>
                                <div ng-show="provForm.name.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.name.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern">
                                    Solo alfanumerios 
                                </div>
                                <div ng-show="provForm.name.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength">
                                    no mas de 20
                                </div>
                                <div ng-show="provForm.name.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">fistlastname</label>
                            <input
                                name="fistlastname"
                                ng-model="user.fistlastname"
                                md-maxlength="20"
                                ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\s]+$/"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.fistlastname.$error" role="alert" multiple>
                                <div ng-show="provForm.fistlastname.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.fistlastname.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern">
                                    Solo alfanumerios 
                                </div>
                                <div ng-show="provForm.fistlastname.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength">
                                    no mas de 20
                                </div>
                                <div ng-show="provForm.fistlastname.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">secondlastname</label>
                            <input
                                name="secondlastname"
                                ng-model="user.secondlastname"
                                md-maxlength="20"
                                ng-pattern="/^[0-9A-Za-zñáéíóúÑÁÉÍÓÚ\s]+$/"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.secondlastname.$error" role="alert" multiple>
                                <div ng-show="provForm.secondlastname.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.secondlastname.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern">
                                    Solo alfanumerios 
                                </div>
                                <div ng-show="provForm.secondlastname.$error.maxlength" ng-message="md-maxlength" class="my-message" translate="error.maxlength">
                                    no mas de 20
                                </div>
                                <div ng-show="provForm.secondlastname.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>                            
                    </div>
                    <div layout-gt-sm="row">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">Email</label>
                            <input
                                name="email"
                                ng-model="user.email"
                                ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.email.$error" role="alert" multiple>
                                <div ng-show="provForm.email.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.email.$error.pattern" ng-message="pattern" class="my-message" translate="error.pattern_email">
                                    Solo alfanumerios 
                                </div>                                
                                <div ng-show="provForm.email.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>
                    </div>
                    <md-list ng-cloak>
                        <md-list-item>
                            <md-icon md-svg-icon="{{setting.icon}}"></md-icon>
                            <p> Cambiar password </p>
                            <md-switch class="md-secondary" ng-model="user.changePassword"></md-switch>
                        </md-list-item>
                    </md-list>
                    <div layout-gt-sm="row" ng-if="user.changePassword">
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">Password</label>
                            <input
                                type="password"
                                id="password"
                                name="password"
                                ng-model="user.password"
                                ng-minlength="3"
                                required
                                >
                            <div ng-messages="provForm.password.$error" role="alert" multiple>
                                <div ng-show="provForm.password.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.password.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                            </div>                                
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label translate="">Repit Password</label>
                            <input
                                type="password"
                                id="passwordr"
                                name="passwordr"
                                ng-model="user.passwordr"
                                ng-minlength="3"
                                pw-check="password"
                                required
                                >
                            <div ng-messages="provForm.passwordr.$error" role="alert" multiple>
                                <div ng-show="provForm.passwordr.$error.required" ng-message="required" class="my-message" translate="error.required">
                                    requerido
                                </div>
                                <div ng-show="provForm.passwordr.$error.minlength" ng-message="md-minlength" class="my-message" translate="error.minlength">
                                    mas de 3
                                </div>
                                <div ng-show="provForm.passwordr.$error.pwmatch" ng-message="pwmatch" class="my-message" translate="error.pwmatch">
                                    chupa el perro
                                </div>
                            </div>                                
                        </md-input-container>                           
                    </div>
                </md-content>                            
            </div>
        </md-dialog-content>
        <md-dialog-actions layout="row">
            <span flex></span>
            <md-button ng-click="cancel()">
                <span translate="menus.admin.login.cancel">Cancelar</span>                
            </md-button>
            <md-button ng-disabled="provForm.$invalid" ng-click="save()" style="margin-right:20px;">
                <span translate="menus.admin.login.ok">Aceptar</span>  
            </md-button>
        </md-dialog-actions>
    </form>
</md-dialog>

